<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dini ve Milli Günler Sekmeli Widgetı - ALATURKA</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ------------------------------------------- */
        /* 1. ALATURKA Tema Değişkenleri ve Temel Stil */
        /* ------------------------------------------- */
        :root {
            --bg-color: #1a1a1a;        
            --accent-color: #ff9900;    /* Turuncu */
            --text-color: #f0f0f0;      
            --header-bg: #2c2c2c;       
            --border-color: #444;       
            --highlight-bg: #40320c;    
            --passed-color: #888;       
        }

        body {
            background-color: transparent !important;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            color: var(--text-color);
        }

        .gunler-widget-container {
            max-width: 350px; 
            width: 100%;
            margin: 0 auto;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            box-sizing: border-box;
            /* Widget Yüksekliği Artırıldı */
            min-height: 550px; 
            display: flex;
            flex-direction: column;
        }

        /* ------------------------------------------- */
        /* 2. Başlık ve Sekmeler Stilleri */
        /* ------------------------------------------- */
        .widget-header {
            padding: 15px 10px;
            background-color: var(--header-bg);
            border-bottom: 2px solid var(--accent-color);
            border-radius: 6px 6px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            flex-shrink: 0;
            width: 120px; 
            text-align: left; 
            display: flex; 
            flex-direction: column; 
            align-items: flex-start;
        }
        .logo-container img {
            height: 30px; 
            width: auto;
            vertical-align: middle;
            margin-bottom: 3px;
        }
        .widget-title {
            color: var(--accent-color);
            font-size: 0.85em;
            font-weight: bold;
            margin: 0;
            line-height: 1;
        }
        .header-info {
            flex-grow: 1;
            text-align: right;
            font-size: 0.9em;
        }
        .header-info p {
            margin: 5px 0 0;
            font-size: 1.1em;
            color: var(--text-color);
            font-weight: bold;
        }

        /* Sekme (Tab) Menüsü */
        .tabs {
            display: flex;
            background-color: #222;
            border-bottom: 1px solid var(--border-color);
        }
        .tab-button {
            flex-grow: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            color: #ccc;
            font-weight: bold;
            transition: background-color 0.3s;
            display: flex; /* İkonu hizalamak için */
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }
        .tab-button.active {
            color: var(--accent-color);
            background-color: #333;
            border-bottom: 3px solid var(--accent-color);
        }
        
        /* Sekme İçerikleri */
        .tab-content {
            padding: 0 15px;
            overflow-y: auto; 
            flex-grow: 1; 
            max-height: 380px; 
            /* KAYDIRMA ÇUBUĞUNU GİZLEME */
            -ms-overflow-style: none;  
            scrollbar-width: none;  
        }
        .tab-content::-webkit-scrollbar {
            width: 0 !important;
        }

        .tab-pane {
            display: none;
            flex-direction: column;
            height: 100%;
        }
        .tab-pane.active {
            display: flex;
        }

        /* Liste Stilleri */
        .gunler-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .gunler-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #333;
            font-size: 0.95em;
        }
        .gunler-list li:last-child {
            border-bottom: none;
        }
        .gun-name {
            font-weight: normal;
            flex-basis: 50%; 
            color: var(--text-color);
        }
        .gun-date {
            flex-basis: 30%;
            color: #ccc;
            font-size: 0.9em;
            text-align: center;
        }
        .gun-countdown {
            flex-basis: 20%;
            text-align: right;
            font-weight: bold;
            color: var(--accent-color);
        }
        
        /* Bugün Vurgusu */
        .gunler-list li.today-highlight {
            background-color: var(--highlight-bg);
            border-radius: 4px;
            padding: 8px 5px;
            margin: 5px -5px; 
            border: 1px solid var(--accent-color);
            font-weight: bold;
        }
        .gunler-list li.today-highlight .gun-name,
        .gunler-list li.today-highlight .gun-countdown {
             color: #fff;
        }
        
        /* Geçmiş Gün Vurgusu */
        .gunler-list li.passed-day .gun-name,
        .gunler-list li.passed-day .gun-date {
            color: var(--passed-color); 
        }
        .gunler-list li.passed-day .gun-countdown {
            color: var(--passed-color); 
            font-weight: normal;
        }
        
        /* Geri Sayım Sayacı Stili (Font Boyutları Küçültüldü) */
        .countdown { 
            text-align: center; 
            padding: 10px 15px; 
            font-size: 1.0em; /* KÜÇÜLTÜLDÜ */
            color: var(--text-color); 
            background-color: #333; 
            font-weight: bold; 
            margin-top: auto; 
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 6px 6px;
        }
        .countdown-time { 
            color: var(--accent-color); 
            font-size: 1.1em; /* KÜÇÜLTÜLDÜ */
        }
        
        /* Her sekmenin kendine ait geri sayım sayacı */
        .countdown-pane {
            display: none;
        }
        .countdown-pane.active {
            display: block;
        }
        
    </style>
</head>
<body>

    <div class="gunler-widget-container">

        <div class="widget-header">
             <div class="logo-container">
                <img src="https://allaturkaa.de/forum/wcf/images/allaturkaa/logo.png" alt="ALATURKA Logo">
                <span class="widget-title">ÖNEMLİ GÜNLER</span> 
             </div>
             <div class="header-info">
                 <p id="widget-date-info">Tarih Bilgisi</p>
             </div>
        </div>
        
        <div class="tabs">
            <div class="tab-button active" data-tab="dini">
                <i class="fas fa-mosque"></i> DİNİ GÜNLER
            </div>
            <div class="tab-button" data-tab="milli">
                <i class="fas fa-flag"></i> MİLLİ GÜNLER
            </div>
        </div>
        
        <div class="tab-content">
            <div id="dini" class="tab-pane active">
                <ul class="gunler-list" id="dini-gunler-listesi">
                    <li><span class="gun-name">Yükleniyor...</span></li>
                </ul>
            </div>
            <div id="milli" class="tab-pane">
                <ul class="gunler-list" id="milli-gunler-listesi">
                    <li><span class="gun-name">Yükleniyor...</span></li>
                </ul>
            </div>
        </div>
        
        <div class="countdown">
            <div id="dini-countdown" class="countdown-pane active" data-tab="dini">
                <span id="next-dini-gun-name">Yakın Dini Gün</span>'a Kalan Süre: <span class="countdown-time" id="dini-countdown-timer">00 Gün 00:00:00</span>
            </div>
            <div id="milli-countdown" class="countdown-pane" data-tab="milli">
                <span id="next-milli-gun-name">Yakın Milli Gün</span>'a Kalan Süre: <span class="countdown-time" id="milli-countdown-timer">00 Gün 00:00:00</span>
            </div>
        </div>
        
    </div>

<script>
    // ========================================================
    // 1. YAPILANDIRMA VE SABİT VERİLER (Kapsamlı 2025/2026 Listesi)
    // ========================================================
    
    // NOT: Yıl sonlarında (Aralık) bu listeyi güncelleyebilirsiniz.
    // Tarih formatı: YIL-AY-GÜN (Miladi)
    const OENEMLI_GUNLER = [
        // DİNİ GÜNLER (2025-2026)
        { name: "Üç Ayların Başlangıcı", date: "2025-01-20", type: "dini" },
        { name: "Regaip Kandili", date: "2025-01-23", type: "dini" },
        { name: "Miraç Kandili", date: "2025-02-27", type: "dini" },
        { name: "Berat Kandili", date: "2025-03-16", type: "dini" },
        { name: "Ramazan Başlangıcı", date: "2025-03-29", type: "dini" },
        { name: "Kadir Gecesi", date: "2025-04-23", type: "dini" },
        { name: "Ramazan Bayramı Arife", date: "2025-04-27", type: "dini" },
        { name: "Ramazan Bayramı (1. Gün)", date: "2025-04-28", type: "dini" },
        { name: "Kurban Bayramı Arife", date: "2025-06-05", type: "dini" },
        { name: "Kurban Bayramı (1. Gün)", date: "2025-06-06", type: "dini" },
        { name: "Hicri Yılbaşı (1 Muharrem 1447)", date: "2025-06-27", type: "dini" },
        { name: "Aşure Günü", date: "2025-07-06", type: "dini" },
        { name: "Mevlid Kandili", date: "2025-09-04", type: "dini" },
        
        // Bu yılın (2025) Milli Günleri
        { name: "Yılbaşı Tatili", date: "2025-01-01", type: "milli" },
        { name: "23 Nisan Ulusal Egemenlik ve Çocuk Bayramı", date: "2025-04-23", type: "milli" },
        { name: "1 Mayıs Emek ve Dayanışma Günü", date: "2025-05-01", type: "milli" },
        { name: "19 Mayıs Atatürk'ü Anma ve Gençlik Spor Bayramı", date: "2025-05-19", type: "milli" },
        { name: "15 Temmuz Demokrasi ve Milli Birlik Günü", date: "2025-07-15", type: "milli" },
        { name: "30 Ağustos Zafer Bayramı", date: "2025-08-30", type: "milli" },
        { name: "29 Ekim Cumhuriyet Bayramı", date: "2025-10-29", type: "milli" },

        // Gelecek Yıl (2026) Günleri
        { name: "Yılbaşı Tatili (2026)", date: "2026-01-01", type: "milli" },
        { name: "Üç Ayların Başlangıcı (2026)", date: "2026-01-09", type: "dini" },
        { name: "Regaip Kandili (2026)", date: "2026-01-12", type: "dini" },
        { name: "23 Nisan Ulusal Egemenlik ve Çocuk Bayramı (2026)", date: "2026-04-23", type: "milli" },
    ].sort((a, b) => new Date(a.date) - new Date(b.date)); 

    // DOM Elementleri
    const widgetDateInfo = document.getElementById('widget-date-info');
    const diniGunlerListesi = document.getElementById('dini-gunler-listesi');
    const milliGunlerListesi = document.getElementById('milli-gunler-listesi');
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabPanes = document.querySelectorAll('.tab-pane');
    const countdownPanes = document.querySelectorAll('.countdown-pane');
    
    // Geri Sayım Elementleri
    const diniCountdownTimer = document.getElementById('dini-countdown-timer');
    const nextDiniGunNameElement = document.getElementById('next-dini-gun-name');
    const milliCountdownTimer = document.getElementById('milli-countdown-timer');
    const nextMilliGunNameElement = document.getElementById('next-milli-gun-name');

    // Global değişkenler
    let nextDiniGun = null; 
    let nextMilliGun = null; 
    
    // ========================================================
    // 2. YARDIMCI FONKSİYONLAR
    // ========================================================

    /**
     * İki tarih arasındaki gün farkını hesaplar.
     */
    function getDateDifference(date1, date2) {
        const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());
        const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());
        
        const diffTime = d2.getTime() - d1.getTime();
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        return diffDays;
    }
    
    /**
     * Tipe göre en yakın gelecek günün detaylarını hesaplar.
     */
    function findNextUpcomingDay(today, type) {
        const allDaysWithDiff = OENEMLI_GUNLER
            .filter(item => item.type === type)
            .map(item => ({
                ...item,
                targetDate: new Date(item.date),
                daysUntil: getDateDifference(today, new Date(item.date))
            }))
            .filter(item => item.daysUntil >= 0) 
            .sort((a, b) => a.daysUntil - b.daysUntil);
            
        return allDaysWithDiff.length > 0 ? allDaysWithDiff[0] : null;
    }


    // ========================================================
    // 3. WIDGET GÜNCELLEME İŞLEMLERİ
    // ========================================================
    
    /**
     * Belirtilen tipe göre geri sayım sayacını günceller.
     */
    function updateSingleCountdown(type) {
        const now = new Date();
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        
        let nextGunRef, nameElement, timerElement;

        if (type === 'dini') {
            nextGunRef = nextDiniGun;
            nameElement = nextDiniGunNameElement;
            timerElement = diniCountdownTimer;
        } else if (type === 'milli') {
            nextGunRef = nextMilliGun;
            nameElement = nextMilliGunNameElement;
            timerElement = milliCountdownTimer;
        } else {
            return;
        }

        // Günün değişmesi ihtimaline karşı tekrar kontrol et
        if (!nextGunRef || nextGunRef.targetDate.getTime() < today.getTime()) {
            nextGunRef = findNextUpcomingDay(today, type);
            if (type === 'dini') nextDiniGun = nextGunRef;
            if (type === 'milli') nextMilliGun = nextGunRef;
        }

        if (!nextGunRef) {
            nameElement.textContent = `Yakın ${type === 'dini' ? 'Dini' : 'Milli'} Gün`;
            timerElement.textContent = "Bilgi Yok";
            return;
        }

        // Geri sayım mantığı
        const targetDayStart = new Date(nextGunRef.targetDate.getFullYear(), nextGunRef.targetDate.getMonth(), nextGunRef.targetDate.getDate());
        const remainingMs = targetDayStart.getTime() - now.getTime();
        
        if (remainingMs <= 0 && nextGunRef.daysUntil === 0) {
            nameElement.textContent = nextGunRef.name;
            timerElement.textContent = "BUGÜN!";
            return;
        }
        
        // Bir sonraki güne geçiş (Gün atlaması)
        if (remainingMs < - (1000 * 60 * 60 * 24)) { 
             nextGunRef = findNextUpcomingDay(today, type);
             if (type === 'dini') nextDiniGun = nextGunRef;
             if (type === 'milli') nextMilliGun = nextGunRef;
             return; 
        }

        const totalSeconds = Math.floor(remainingMs / 1000);
        const days = Math.floor(totalSeconds / (60 * 60 * 24));
        const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / (60 * 60));
        const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);
        const seconds = Math.floor(totalSeconds % 60);
        
        // Geri Sayım Metnini Güncelle
        nameElement.textContent = nextGunRef.name;
        timerElement.textContent = 
            `${String(days).padStart(2, '0')} Gün ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }


    /**
     * Verilen listeyi DOM'a basar.
     */
    function renderList(listElement, data) {
        const now = new Date();
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        
        listElement.innerHTML = ''; 

        let allDays = data
            .map(item => ({
                ...item,
                targetDate: new Date(item.date),
                daysUntil: getDateDifference(today, new Date(item.date))
            }));

        if (allDays.length === 0) {
            listElement.innerHTML = '<li><span class="gun-name">Yıl için tanımlanmış önemli gün bulunmamaktadır.</span></li>';
            return;
        }

        allDays.forEach(gun => {
            const listItem = document.createElement('li');
            let countdownText = "";
            let dateText = gun.targetDate.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
            
            if (gun.daysUntil === 0) {
                countdownText = "BUGÜN!";
                listItem.classList.add('today-highlight');
            } else if (gun.daysUntil > 0) {
                 if (gun.daysUntil === 1) {
                    countdownText = "YARIN";
                } else {
                    countdownText = `${gun.daysUntil} gün`;
                }
            } else { 
                countdownText = "Geçti";
                listItem.classList.add('passed-day'); 
            }
            
            listItem.innerHTML = `
                <span class="gun-name">${gun.name}</span>
                <span class="gun-date">${dateText}</span>
                <span class="gun-countdown">${countdownText}</span>
            `;
            listElement.appendChild(listItem);
        });

    }

    /**
     * Sekmeleri yönetir.
     */
    function setupTabs() {
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');

                // Sekme Butonlarını Yönet
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active'); 

                // Liste İçeriklerini Yönet
                tabPanes.forEach(pane => pane.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');
                
                // Geri Sayım Alanlarını Yönet
                countdownPanes.forEach(pane => pane.classList.remove('active'));
                document.getElementById(tabId + '-countdown').classList.add('active');
            });
        });
    }

    /**
     * Tüm widget içeriğini günceller (Liste ve Tarih).
     */
    function updateWidgetContent() {
        const now = new Date();
        // Tarih Bilgisini Güncelle
        widgetDateInfo.textContent = now.toLocaleDateString('tr-TR', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });

        // Veriyi ayır
        const diniGunler = OENEMLI_GUNLER.filter(g => g.type === 'dini');
        const milliGunler = OENEMLI_GUNLER.filter(g => g.type === 'milli');

        // Listeleri render et
        renderList(diniGunlerListesi, diniGunler);
        renderList(milliGunlerListesi, milliGunler);
        
        // İlk yüklemede en yakın günleri bul
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        nextDiniGun = findNextUpcomingDay(today, 'dini');
        nextMilliGun = findNextUpcomingDay(today, 'milli');
    }
    
    /**
     * Geri sayımları her saniye günceller.
     */
    function updateCountdowns() {
        updateSingleCountdown('dini');
        updateSingleCountdown('milli');
    }


    // ========================================================
    // 4. BAŞLANGIÇ VE ZAMANLAYICI
    // ========================================================
    
    setupTabs();
    updateWidgetContent();
    
    // Geri sayımları her saniye güncelle
    setInterval(updateCountdowns, 1000); 
    // Listeleri ve güncel tarihi 1 dakikada bir güncellemek yeterli
    setInterval(updateWidgetContent, 60000); 

</script>
</body>
</html>