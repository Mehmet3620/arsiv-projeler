<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Mehmet YÄ±lan Oyunu</title>
    <style>
        /* Arka planÄ± Mehmet temasÄ±na uygun yapalÄ±m */
        body { 
            background: #008080; 
            margin: 0; 
            padding: 20px; 
            font-family: 'Tahoma', sans-serif; 
            overflow: hidden;
        }
    </style>
</head>
<body>

<div ondblclick="acYilan()" onclick="acYilan()" style="width: 70px; height: 75px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; margin: 10px; transition: 0.2s;" onmouseover="this.style.backgroundColor='rgba(255,255,255,0.2)'" onmouseout="this.style.backgroundColor='transparent'">
    <div style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 32px; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));">
        ğŸ
    </div>
    <span style="color: white; font-size: 11px; margin-top: 4px; text-shadow: 1px 1px 2px #000; font-family: 'Tahoma', sans-serif;">
        YÄ±lan Oyunu
    </span>
</div>

<div id="snakeWindow" style="display:none; position:fixed; top:120px; left:120px; z-index:99999; width:320px; background:#c0c0c0; border:2px solid #fff; border-right:2px solid #000; border-bottom:2px solid #000; padding:3px; box-shadow: 10px 10px 20px rgba(0,0,0,0.5);">
    <div id="snakeDrag" style="background:linear-gradient(90deg, #000080, #008080); color:white; padding:3px 5px; display:flex; justify-content:space-between; align-items:center; cursor:move;">
        <span style="font-size:11px; font-weight:bold;">Seyyah Snake Game</span>
        <button onclick="window.closeSnake()" style="background:#c0c0c0; border:1px solid #fff; border-right:1px solid #000; border-bottom:1px solid #000; cursor:pointer;">X</button>
    </div>
    <div style="padding:10px; background:#000; text-align:center;">
        <canvas id="snakeCanvas" width="300" height="300" style="border:2px solid #555; background:#000;"></canvas>
        <div id="scoreBoard" style="color:#0f0; font-family:monospace; margin-top:5px; font-size:16px;">Skor: 0</div>
    </div>
    <div style="background:#c0c0c0; padding:5px; text-align:center;">
        <button onclick="window.startSnake()" style="width:100%; padding:5px; font-weight:bold; cursor:pointer; background:#c0c0c0; border:2px solid #fff; border-right:2px solid #000; border-bottom:2px solid #000;">[ OYUNU BAÅLAT ]</button>
    </div>
</div>

<script>
// Sayfa tamamen yÃ¼klendiÄŸinde fonksiyonlarÄ± global (pencere) dÃ¼zeyine Ã§Ä±karÄ±r
document.addEventListener("DOMContentLoaded", function() {
    
    // ğŸ PENCEREYÄ° AÃ‡MA VE SÃœRÃœKLEMEYÄ° BAÄLAMA
    window.acYilan = function() {
        console.log("YÄ±lan fonksiyonu Ã§alÄ±ÅŸtÄ±!");
        var win = document.getElementById('snakeWindow');
        var dragArea = document.getElementById('snakeDrag');
        
        if (win) {
            win.style.display = 'block';
            win.style.zIndex = "999999";
            setupDrag(win, dragArea);
            console.log("YÄ±lan penceresi aÃ§Ä±ldÄ± ve sÃ¼rÃ¼kleme aktif!");
        } else {
            alert("Hata: snakeWindow bulunamadÄ±!");
        }
    };

    // âŒ KAPATMA FONKSÄ°YONU
    window.closeSnake = function() {
        if(window.gameLoop) clearInterval(window.gameLoop);
        document.getElementById('snakeWindow').style.display = 'none';
    };

    // ğŸ¯ SÃœRÃœKLEME MOTORU
    function setupDrag(windowEl, dragEl) {
        if (!windowEl || !dragEl) return;
        let shiftX, shiftY;

        dragEl.onmousedown = function(e) {
            const rect = windowEl.getBoundingClientRect();
            shiftX = e.clientX - rect.left;
            shiftY = e.clientY - rect.top;
            windowEl.style.zIndex = "1000000";

            document.onmousemove = function(e) {
                windowEl.style.left = (e.clientX - shiftX) + "px";
                windowEl.style.top = (e.clientY - shiftY) + "px";
                windowEl.style.transform = "none"; 
            };

            document.onmouseup = function() {
                document.onmousemove = null;
            };
        };
    }

    // ğŸ® OYUN MANTIÄI VE BAÅLATMA
    window.startSnake = function() {
        var canvas = document.getElementById("snakeCanvas");
        var ctx = canvas.getContext("2d");
        var snake = [{x: 150, y: 150}, {x: 140, y: 150}];
        var dx = 10, dy = 0, score = 0;
        var food = {x: 50, y: 50};

        if(window.gameLoop) clearInterval(window.gameLoop);
        window.gameLoop = setInterval(function() {
            var head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);
            if(head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('scoreBoard').innerText = "Skor: " + score;
                food = {x: Math.floor(Math.random()*29)*10, y: Math.floor(Math.random()*29)*10};
            } else { snake.pop(); }

            ctx.fillStyle = "black"; ctx.fillRect(0,0,300,300);
            ctx.fillStyle = "red"; ctx.fillRect(food.x, food.y, 10, 10);
            ctx.fillStyle = "lime"; snake.forEach(p => ctx.fillRect(p.x, p.y, 10, 10));

            if(head.x < 0 || head.x > 290 || head.y < 0 || head.y > 290) {
                clearInterval(window.gameLoop); alert("Oyun Bitti! Skorunuz: " + score);
            }
        }, 100);

        document.onkeydown = function(e) {
            if(e.keyCode===37 && dx===0) {dx=-10; dy=0}
            if(e.keyCode===38 && dy===0) {dx=0; dy=-10}
            if(e.keyCode===39 && dx===0) {dx=10; dy=0}
            if(e.keyCode===40 && dy===0) {dx=0; dy=10}
        };
    };

    console.log("Mehmet-OS: YÄ±lan fonksiyonlarÄ± baÅŸarÄ±yla hazÄ±rlandÄ±.");
});
</script>

</body>
</html>