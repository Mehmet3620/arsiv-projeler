<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktif Müzik Çalar Arayüzü (Gerçek Oynatma)</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* CSS kodları önceki sürüm ile aynıdır (Soluk Tema) */
        :root {
            --bg-main: #3a3a3a;      
            --bg-panel: #4a4a4a;     
            --text-light: #f4f4f4;    
            --accent-color: #ff9800; 
            --secondary-accent: #00bcd4; 
            --shadow: 0 6px 6px rgba(0, 0, 0, 0.5); 
            --box-shadow-inset: inset 0 0 5px rgba(0, 0, 0, 0.2);
        }
        
        body {
            background-color: transparent; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-light);
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        #music-player-wrapper { width: 350px; margin: 0 auto; background: var(--bg-main); border-radius: 12px; box-shadow: var(--shadow); padding: 20px 15px; text-align: center; }
        #widget-title { color: var(--secondary-accent); margin-bottom: 15px; font-size: 1.3em; border-bottom: 2px solid var(--bg-panel); padding-bottom: 10px; }

        #now-playing-info { display: flex; align-items: center; background-color: var(--bg-panel); padding: 10px; border-radius: 8px; margin-bottom: 15px; text-align: left; box-shadow: var(--box-shadow-inset); }
        #album-cover-container { width: 70px; height: 70px; border-radius: 6px; margin-right: 15px; border: 2px solid var(--secondary-accent); display: flex; align-items: center; justify-content: center; background-color: #555; }
        #album-cover { width: 100%; height: 100%; border-radius: 4px; object-fit: cover; display: none; }
        #album-icon { font-size: 3em; color: rgba(255, 255, 255, 0.7); }

        #song-details { flex-grow: 1; min-width: 0; }
        #current-song-title { font-size: 1.1em; font-weight: bold; color: var(--accent-color); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        #current-artist-name { font-size: 0.9em; color: #ccc; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        #player-controls { display: flex; justify-content: space-between; align-items: center; padding: 5px 0; margin-bottom: 20px; }
        .control-btn { background: none; border: none; color: var(--text-light); font-size: 1.2em; cursor: pointer; transition: color 0.2s; padding: 5px; }
        .control-btn:hover { color: var(--secondary-accent); }
        #play-pause-btn { font-size: 1.8em; color: var(--accent-color); }
        #play-pause-btn:hover { color: #ffb74d; }
        #time-display { font-size: 1em; font-weight: 500; color: var(--text-light); }

        #playlist-container { max-height: 350px; overflow-y: auto; padding-right: 5px; border-radius: 6px; background-color: var(--bg-panel); }
        #playlist-container::-webkit-scrollbar { width: 6px; }
        #playlist-container::-webkit-scrollbar-thumb { background: var(--secondary-accent); border-radius: 10px; }
        #playlist-container::-webkit-scrollbar-track { background: var(--bg-panel); }

        .playlist-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 10px; margin-bottom: 2px; cursor: pointer; transition: all 0.2s; border-radius: 6px; background-color: #555; }
        .playlist-item:hover { background-color: #666; box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); }
        .playlist-item.active { box-shadow: var(--box-shadow-inset); border: 1px solid var(--secondary-accent); background-color: #666; }

        .song-info-text { text-align: left; flex-grow: 1; min-width: 0; margin-right: 10px; }
        .song-title { font-size: 1em; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .song-artist { font-size: 0.8em; color: rgba(255, 255, 255, 0.7); }
        .song-duration { font-size: 0.9em; font-weight: 500; opacity: 0.8; min-width: 40px; text-align: right; }
        .play-list-icon { margin-right: 10px; color: rgba(255, 255, 255, 0.8); font-size: 1.1em; }
    </style>
    
</head>
<body>

<div id="music-player-wrapper">
    
    <div id="widget-title">Özel Müzik Çalar (20 Parça)</div>

    <audio id="audio-player" hidden></audio>
    
    <div id="now-playing-info">
        <div id="album-cover-container">
            <i id="album-icon" class="fas fa-headphones"></i>
            <img id="album-cover" src="" alt="Album Kapağı">
        </div>
        <div id="song-details">
            <div id="current-song-title">Lütfen listeden bir şarkı seçin.</div>
            <div id="current-artist-name"></div>
        </div>
    </div>
    
    <div id="player-controls">
        <div id="time-display">00:00 / 00:00</div> 
        
        <div>
            <button class="control-btn" onclick="seekSong(-10)"><i class="fas fa-backward"></i></button>
            <button id="play-pause-btn" class="control-btn" onclick="togglePlay()"><i class="fas fa-play"></i></button>
            <button class="control-btn" onclick="seekSong(10)"><i class="fas fa-forward"></i></button>
        </div>
        
        <div style="width: 50px;"></div>
    </div>

    <div id="playlist-container">
        </div>
    
</div>

<script>
    // --- ŞARKI VERİLERİ (20 ADET) ---
    // URL ve AlbumCover alanlarını kendi linklerinizle değiştirin.
    const songs = [
        // SİZİN EKLEDİĞİNİZ GERÇEK ÖRNEK (Çalışıyor)
        { 
            title: "Geceler", 
            artist: "Ezhel", 
            duration: "03:45", 
            url: "https://www.radyocanerenler.com/single/Ezhel-Geceler.mp3", 
            albumCover: "https://images.genius.com/8930fe498dd18a296a4cc0cead0a4dba.1000x1000x1.png" 
        }, 
        
        // DEĞİŞTİRİLMEYE HAZIR 19 YER TUTUCU
        { 
            title: "Yıldızlarda", 
            artist: "Madrigal", 
            duration: "04:12", 
            url: "[MP3_URL_1]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_1" 
        },
        { 
            title: "Kendine İyi Bak", 
            artist: "Müslüm Gürses", 
            duration: "05:01", 
            url: "[MP3_URL_2]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_2" 
        },
        { 
            title: "Söz Müzik Sensin", 
            artist: "Duman", 
            duration: "03:22", 
            url: "[MP3_URL_3]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_3" 
        },
        { 
            title: "Ateşböceği", 
            artist: "Yüksek Sadakat", 
            duration: "04:08", 
            url: "[MP3_URL_4]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_4" 
        },
        
        { 
            title: "Rakkas", 
            artist: "Tarkan", 
            duration: "03:55", 
            url: "[MP3_URL_5]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_5" 
        },
        { 
            title: "Cambaz", 
            artist: "Mor ve Ötesi", 
            duration: "04:30", 
            url: "[MP3_URL_6]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_6" 
        },
        { 
            title: "Fırtınam", 
            artist: "Cem Adrian", 
            duration: "05:15", 
            url: "[MP3_URL_7]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_7" 
        },
        { 
            title: "Masal", 
            artist: "Sertab Erener", 
            duration: "03:40", 
            url: "[MP3_URL_8]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_8" 
        },
        { 
            title: "Belki Bir Gün", 
            artist: "Pinhani", 
            duration: "04:50", 
            url: "[MP3_URL_9]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_9" 
        },

        { 
            title: "Son Mektup", 
            artist: "Teoman", 
            duration: "03:33", 
            url: "[MP3_URL_10]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_10" 
        },
        { 
            title: "Gül Döktüm Yollarına", 
            artist: "Kayahan", 
            duration: "04:18", 
            url: "[MP3_URL_11]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_11" 
        },
        { 
            title: "Sen Affetsen", 
            artist: "Sezen Aksu", 
            duration: "04:00", 
            url: "[MP3_URL_12]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_12" 
        },
        { 
            title: "Yalan", 
            artist: "Mabel Matiz", 
            duration: "03:10", 
            url: "[MP3_URL_13]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_13" 
        },
        { 
            title: "Beni Unutma", 
            artist: "Haluk Levent", 
            duration: "05:25", 
            url: "[MP3_URL_14]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_14" 
        },

        { 
            title: "Suspus", 
            artist: "Ceza", 
            duration: "04:05", 
            url: "[MP3_URL_15]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_15" 
        },
        { 
            title: "Oysa Bir Umut", 
            artist: "Yaşar", 
            duration: "03:58", 
            url: "[MP3_URL_16]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_16" 
        },
        { 
            title: "Yaz Yağmuru", 
            artist: "Şebnem Ferah", 
            duration: "04:44", 
            url: "[MP3_URL_17]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_17" 
        },
        { 
            title: "Her Şey Aşktan", 
            artist: "Füsun Önal", 
            duration: "03:00", 
            url: "[MP3_URL_18]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_18" 
        },
        { 
            title: "Anlamazdın", 
            artist: "Nilüfer", 
            duration: "04:37", 
            url: "[MP3_URL_19]", 
            albumCover: "https://via.placeholder.com/70x70/666?text=KAPAK_19" 
        }
    ];
    
    // JS KODUNUN KALANI ÖNCEKİ SÜRÜMLE AYNI VE GERÇEK OYNATMAYI DESTEKLEMEKTEDİR.
    // Lütfen tüm JS kodunu buraya eklediğinizden emin olun.
    
    const audioPlayer = document.getElementById('audio-player');
    let currentSongIndex = -1;
    let isPlaying = false;
    let songInterval;
    let isAudioLoaded = false;
    
    function formatTime(seconds) {
        if (isNaN(seconds) || seconds < 0) return "00:00";
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
    }

    function renderPlaylist() {
        const container = document.getElementById('playlist-container');
        container.innerHTML = ''; 

        songs.forEach((song, index) => {
            const item = document.createElement('div');
            item.className = 'playlist-item';
            item.dataset.index = index;
            item.onclick = () => loadSong(index);

            const iconClass = song.url && !song.url.includes('PLACEHOLDER') ? 'fas fa-play-circle' : 'fas fa-music';

            item.innerHTML = `
                <i class="${iconClass} play-list-icon"></i>
                <div class="song-info-text">
                    <div class="song-title">${song.title}</div>
                    <div class="song-artist">${song.artist}</div>
                </div>
                <div class="song-duration">${song.duration}</div>
            `;
            container.appendChild(item);
        });
        
        if (songs.length > 0) {
            loadSong(0);
        }
    }

    function loadSong(index) {
        currentSongIndex = index;
        const song = songs[index];
        
        stopPlay();

        document.getElementById('current-song-title').textContent = song.title;
        document.getElementById('current-artist-name').textContent = song.artist;
        
        const coverEl = document.getElementById('album-cover');
        const iconEl = document.getElementById('album-icon');
        if (song.albumCover && !song.albumCover.includes('placeholder')) {
            coverEl.src = song.albumCover;
            coverEl.style.display = 'block';
            iconEl.style.display = 'none';
        } else {
            coverEl.style.display = 'none';
            iconEl.style.display = 'block';
        }

        document.querySelectorAll('.playlist-item').forEach(item => {
            item.classList.remove('active');
            if (parseInt(item.dataset.index) === index) {
                item.classList.add('active');
            }
        });
        
        isAudioLoaded = false;
        if (song.url && !song.url.includes('PLACEHOLDER')) {
            audioPlayer.src = song.url;
            audioPlayer.addEventListener('loadedmetadata', updateDisplayDuration, { once: true });
            audioPlayer.load();
            isAudioLoaded = true;
        } else {
            const durationParts = song.duration.split(':').map(Number);
            audioPlayer.duration = durationParts[0] * 60 + durationParts[1];
            updateDisplayDuration();
        }
    }

    function updateDisplayDuration() {
         document.getElementById('time-display').textContent = formatTime(0) + " / " + formatTime(audioPlayer.duration);
    }
    
    function togglePlay() {
        if (currentSongIndex === -1) loadSong(0);
        
        isPlaying = !isPlaying;
        const icon = document.querySelector('#play-pause-btn i');
        
        if (isPlaying) {
            icon.className = 'fas fa-pause';
            if (isAudioLoaded && songs[currentSongIndex].url && !songs[currentSongIndex].url.includes('PLACEHOLDER')) {
                audioPlayer.play().catch(e => console.error("Oynatma hatası:", e));
                startTimer(true); 
            } else {
                startTimer(false); 
            }
        } else {
            icon.className = 'fas fa-play';
            if (isAudioLoaded && songs[currentSongIndex].url && !songs[currentSongIndex].url.includes('PLACEHOLDER')) {
                audioPlayer.pause();
            }
            clearInterval(songInterval);
        }
    }
    
    function stopPlay() {
        isPlaying = false;
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
        clearInterval(songInterval);
        document.querySelector('#play-pause-btn i').className = 'fas fa-play';
    }

    function startTimer(useRealTime) {
        clearInterval(songInterval);
        
        songInterval = setInterval(() => {
            const song = songs[currentSongIndex];
            
            let currentTime;
            let totalDuration = audioPlayer.duration;
            
            if (useRealTime) {
                currentTime = audioPlayer.currentTime;
            } else {
                currentTime = (audioPlayer.currentTime || 0) + 1;
                audioPlayer.currentTime = currentTime; 
            }
            
            document.getElementById('time-display').textContent = formatTime(currentTime) + " / " + formatTime(totalDuration);
            
            if (currentTime >= totalDuration) {
                stopPlay();
                const nextIndex = (currentSongIndex + 1) % songs.length; 
                loadSong(nextIndex);
                if (songs[nextIndex].url && !songs[nextIndex].url.includes('PLACEHOLDER')) {
                     togglePlay(); 
                }
            }
        }, 1000);
    }
    
    function seekSong(seconds) {
        if (currentSongIndex === -1) return;
        
        const totalDuration = audioPlayer.duration;
        let newTime = (audioPlayer.currentTime || 0) + seconds;
        
        audioPlayer.currentTime = Math.max(0, Math.min(totalDuration, newTime));
        
        document.getElementById('time-display').textContent = formatTime(audioPlayer.currentTime) + " / " + formatTime(totalDuration);
    }
    
    audioPlayer.onended = function() {
        stopPlay();
        const nextIndex = (currentSongIndex + 1) % songs.length; 
        loadSong(nextIndex);
        if (songs[nextIndex].url && !songs[nextIndex].url.includes('PLACEHOLDER')) { 
             togglePlay(); 
        }
    };

    document.addEventListener('DOMContentLoaded', renderPlaylist);
</script>

</body>
</html>